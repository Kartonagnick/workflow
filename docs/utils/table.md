[![logo](../logo.png)](../home.md "for developers") 

[P]: ../icons/progress.png  "в процессе..."
[S]: ../icons/success.png   "ошибок не обнаружено"
[F]: ../icons/failed.png    "была выявлена ошибка"
[D]: ../icons/danger.png    "дефекты, недоработки, некритичные баги"
[E]: ../icons/empty.png     "нет данных"
[B]: ../icons/bug.png       "обнаружен баг"
[N]: ../icons/na.png        "функциональность не доступна"

<a name="main"></a>
[![P]][M] utils v0.0.3
======================

Скрипты: `docs/utils`  

| **ID** |         элементы         |   windows  |  
|:------:|:------------------------:|:----------:|  
|  0000  | [backup.bat][00]         | [![S]][00] |  
|  0001  | [git-clean.bat][01]      | [![S]][01] |  
|  0002  | [git-clone.bat][02]      | [![S]][02] |  
|  0003  | [git-date.bat][03]       | [![S]][03] |  

Детали реализации: `docs/utils/vbs`  

| **ID** |      элементы      |   windows  |  
|:------:|:------------------:|:----------:|  
|  0004  | [offset.vbs][04]   | [![S]][04] |  
|  0005  | [to_posix.vbs][05] | [![S]][05] |  

<br/>

[M]: #main  "утилиты обслуживания репозитория"

[00]: docs/backup.md     "для бэкапов"
[01]: #git-clean         "очистка репозитория от мусора"
[02]: #git-clone         "пример-иллюстрация команды клонирования репозитория"
[03]: docs/git-date.md   "батник умеет изменять даты коммитов"
[04]: #offset            "определяет список дат"
[05]: #to_posix          "преобразует дату в posix (кол-во секунд с начала эпохи)"


git-clean
---------
В процессе работы в репозитории образуется различный мусор:  
  - Недостяжимые коммиты  
  - Временные файлы  

Переодически весь этот мусор нужно удалять.  
Для этого, внутри каталога репозитория нужно запускать команду:  
  - `git gc --aggressive`  

Батник `git-clean.bat` служит для удобства запуска этой команды.  

git-clone
---------
Батник служит для удобства клонирования репозитория с гитхаба.  
Обратите внимание:  
  - `set "token=..."`  
    - здесь указываем [токен доступа][TOKEN]  

Если клонировать репозиторий без указания токена,  
тогда репа клонируется в режиме "только для чтения"  

to_posix
--------
Преобразует дату в `posix` - кол-во секунд, прошедшее с начала эпохи  

Пример использования:  

```
set command=cscript.exe /nologo "%~dp0to_posix.vbs" "2021y-06m-30d 12:30:21"
for /f "usebackq tokens=*" %%a in (`%command%`) do (
    @echo [vbs] %%~a seconds
)
```

offset
------
На входе получает:  
  - дата начала  
  - дата конца  
  - кол-во элементов

И вычисляет время для каждого элемента таким образом,  
что бы оно было заданно в указанном диапазоне.  

Пример использования:  

```
set command=cscript.exe /nologo ^
    "%~dp0offset.vbs"           ^
    "2021y-06m-30d 00:00:00"    ^
    "2021y-06m-30d 00:00:10"    ^
    "10"

for /f "usebackq tokens=*" %%a in (`%command%`) do (
    @echo [vbs] %%~a
)
```

Вывод в консоль:  

```
[vbs] 2021-06-30 00:00:00
[vbs] 2021-06-30 00:00:01
[vbs] 2021-06-30 00:00:02
[vbs] 2021-06-30 00:00:03
[vbs] 2021-06-30 00:00:04
[vbs] 2021-06-30 00:00:05
[vbs] 2021-06-30 00:00:06
[vbs] 2021-06-30 00:00:07
[vbs] 2021-06-30 00:00:08
[vbs] 2021-06-30 00:00:10
```
------------------------------------------------------------------

[TOKEN]: https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token

[История](../history.md)  
